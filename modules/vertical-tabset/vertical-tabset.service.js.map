{"version":3,"sources":["../../../.srctemp/modules/vertical-tabset/vertical-tabset.service.ts"],"names":[],"mappings":"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","file":"vertical-tabset.service.js","sourceRoot":"","sourcesContent":["import { Injectable, ElementRef } from '@angular/core';\nimport { BehaviorSubject } from 'rxjs/BehaviorSubject';\nimport { Subject } from 'rxjs/Subject';\n\nimport { SkyVerticalTabComponent } from './vertical-tab.component';\nimport { SkyMediaQueryService } from './../media-queries/media-query.service';\nimport { SkyMediaBreakpoints } from '../media-queries/media-breakpoints';\n\nexport const VISIBLE_STATE = 'shown';\n\n\nexport class SkyVerticalTabsetService {\n\n  public tabs: Array<SkyVerticalTabComponent> = [];\n  public tabClicked: BehaviorSubject<boolean> = new BehaviorSubject(undefined);\n  public activeIndex: number = undefined;\n\n  public hidingTabs = new BehaviorSubject(false);\n  public showingTabs = new BehaviorSubject(false);\n  public tabAdded: Subject<SkyVerticalTabComponent> = new Subject();\n  public indexChanged: BehaviorSubject<number> = new BehaviorSubject(undefined);\n  public switchingMobile: Subject<boolean> = new Subject();\n\n  public animationVisibleState: string;\n\n  private _content: ElementRef;\n\n  public set content(value: ElementRef) {\n    this._content = value;\n  }\n\n  private _tabsVisible: boolean = false;\n  private _contentAdded: boolean = false;\n  private _isWidescreen: boolean = false;\n\n  public constructor(private mediaQueryService: SkyMediaQueryService) {}\n\n  public addTab(tab: SkyVerticalTabComponent) {\n    const index = this.tabs.length;\n    tab.index = index;\n\n    this.tabs.push(tab);\n\n    if (tab.active) {\n      this.activateTab(tab);\n    }\n\n    this.tabAdded.next(tab);\n  }\n\n  public activateTab(tab: SkyVerticalTabComponent) {\n\n    // unactivate active tab\n    let activeTab = this.tabs.find(t => t.index === this.activeIndex);\n    if (activeTab && activeTab.index !== tab.index) {\n      activeTab.active = false;\n      activeTab.tabDeactivated();\n    }\n\n    this.activeIndex = tab.index;\n    this.tabClicked.next(true);\n    this.updateTabClicked();\n  }\n\n  public activeTabContent(): ElementRef {\n    let activeTab = this.tabs.find(t => t.index === this.activeIndex);\n\n    if (activeTab) {\n      return activeTab.tabContent;\n    } else {\n      return undefined;\n    }\n  }\n\n  public isMobile() {\n    return this.mediaQueryService.current === SkyMediaBreakpoints.xs;\n  }\n\n  public updateContent() {\n    if (!this._contentAdded && this.contentVisible()) {\n      // content needs to be moved\n      this.moveContent();\n\n    } else if (this._contentAdded && !this.contentVisible()) {\n      // content hidden\n      this._contentAdded = false;\n    }\n\n    const mobile = this.isMobile();\n\n    if (mobile && this._isWidescreen) {\n      // switching to mobile\n      this.switchingMobile.next(true);\n\n      if (!this.tabsVisible()) {\n        this.hidingTabs.next(true);\n      }\n\n    } else if (!mobile && !this._isWidescreen) {\n      // switching to widescreen\n      this.switchingMobile.next(false);\n\n      if (!this._tabsVisible) {\n        this.showingTabs.next(true);\n      }\n    }\n\n    this._isWidescreen = !mobile;\n  }\n\n  public tabsVisible() {\n    return !this.isMobile() || this._tabsVisible;\n  }\n\n  public contentVisible() {\n    return !this.isMobile() || !this._tabsVisible;\n  }\n\n  public showTabs() {\n    this._tabsVisible = true;\n    this._contentAdded = false;\n    this.animationVisibleState = VISIBLE_STATE;\n    this.showingTabs.next(true);\n  }\n\n  private moveContent() {\n    if (this._content && !this._contentAdded) {\n      let activeContent = this.activeTabContent();\n\n      if (activeContent && activeContent.nativeElement) {\n        this._content.nativeElement.appendChild(activeContent.nativeElement);\n        this._contentAdded = true;\n      }\n    }\n  }\n\n  private updateTabClicked() {\n    this._contentAdded = false;\n\n    if (this.isMobile()) {\n      this._tabsVisible = false;\n      this.animationVisibleState = VISIBLE_STATE;\n      this.hidingTabs.next(true);\n    }\n\n    this.indexChanged.next(this.activeIndex);\n  }\nstatic decorators: DecoratorInvocation[] = [\n{ type: Injectable },\n];\n/** @nocollapse */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n{type: SkyMediaQueryService, },\n];\n}\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"]}