{"version":3,"sources":["../../../.srctemp/modules/link-records/link-records-item-diff.component.ts"],"names":[],"mappings":"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","file":"link-records-item-diff.component.js","sourceRoot":"","sourcesContent":["import { Component, Input, OnInit, ChangeDetectionStrategy } from '@angular/core';\n\nimport { Observable } from 'rxjs/Observable';\nimport 'rxjs/add/operator/distinctUntilChanged';\nimport 'rxjs/add/operator/filter';\nimport 'rxjs/add/operator/take';\n\nimport { SkyLinkRecordsState, SkyLinkRecordsStateDispatcher } from './state';\nimport { SkyLinkRecordsSelectedSetSelectedAction } from './state/selected/actions';\nimport { SkyLinkRecordsFieldModel } from './state/fields/field.model';\nimport { SkyLinkRecordsMatchModel } from './state/matches/match.model';\nimport { SKY_LINK_RECORDS_STATUSES } from './link-records-statuses';\n\n\nexport class SkyLinkRecordsItemDiffComponent implements OnInit {\n  public STATUSES = SKY_LINK_RECORDS_STATUSES;\n   public readOnly: boolean = false;\n   public key: string;\n   public item: any;\n   public match: SkyLinkRecordsMatchModel;\n   public fields: Array<any>;\n   public selectedByDefault: boolean;\n   public showNewFieldValues: boolean;\n\n  /* istanbul ignore next */\n  constructor(\n    private state: SkyLinkRecordsState,\n    private dispatcher: SkyLinkRecordsStateDispatcher\n  ) { }\n\n  public ngOnInit() {\n    if (this.key === undefined) {\n      throw new Error(\"'key' is required.\");\n    }\n  }\n\n  public setFieldSelected(fieldKey: string, ev: any) {\n    this.dispatcher.next(\n      new SkyLinkRecordsSelectedSetSelectedAction(this.key, fieldKey, ev.checked));\n  }\n\n  public trackByFieldKey(index: number, field: SkyLinkRecordsFieldModel) {\n    return field.key;\n  }\n\n  get fieldValues() {\n    return Observable.combineLatest(\n      this.state.map((s: any) => s.fields.item[this.key] || []).distinctUntilChanged(),\n      this.state.map((s: any) => s.selected.item[this.key] || {}).distinctUntilChanged(),\n      (fields: SkyLinkRecordsFieldModel[], selected: { [key: string]: boolean }) => {\n        return fields.map(f => {\n          let checkCurrentValue: boolean = this.showNewFieldValues ? true : f.currentValue;\n\n          return {\n            field: checkCurrentValue && f.newValue &&\n              f.newValue.toString().trim().length > 0 ? f : undefined,\n            selected: selected[f.key] || false\n          };\n        });\n      });\n  }\nstatic decorators: DecoratorInvocation[] = [\n{ type: Component, args: [{\n  selector: 'sky-link-records-item-diff',\n  template: `<table>\n  <thead>\n    <tr *ngIf=\"readOnly\">\n      <th>{{'link_records_item_diff_header_field' | skyResources}}</th>\n      <th>{{'link_records_item_diff_header_current_value' | skyResources}}</th>\n    </tr>\n    <tr *ngIf=\"!readOnly\">\n      <th>{{'link_records_item_diff_header_new_value' | skyResources}}</th>\n      <th class=\"link-records-item-diff-update\">{{'link_records_item_diff_header_update' | skyResources}}</th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr *ngFor=\"let fieldValue of fieldValues | async; trackBy: trackByFieldKey\" [attr.cmp-id]=\"fieldValue.field?.key\">\n      <td *ngIf=\"readOnly && fieldValue.field\">{{ fieldValue.field.label }}</td>\n      <td *ngIf=\"readOnly && fieldValue.field\" class=\"link-records-item-diff-value\" [class.item-deemphasized]=\"fieldValue.selected\" [class.item-highlighted]=\"!fieldValue.selected\">{{ fieldValue.field.currentValue || ('link_records_item_diff_content_no_value' | skyResources) }}</td>\n      <td *ngIf=\"!readOnly && fieldValue.field\" class=\"link-records-item-diff-value\" [class.item-deemphasized]=\"!fieldValue.selected\" [class.item-highlighted]=\"fieldValue.selected\">{{ fieldValue.field.newValue }}</td>\n      <td *ngIf=\"!readOnly && fieldValue.field\" class=\"link-records-item-diff-update\">\n        <sky-checkbox [checked]=\"fieldValue.selected\" (change)=\"setFieldSelected(fieldValue.field.key, $event)\"></sky-checkbox>\n      </td>\n    </tr>\n  </tbody>\n</table>\n`,\n  styles: [`:host {\n  display: block;\n  width: 100%;\n}\n\n:host table {\n  border-collapse: collapse;\n  width: 100%;\n}\n\n:host table th {\n  font-family: \"Blackbaud Sans\", \"Helvetica Neue\", Arial, sans-serif;\n  color: #686c73;\n  font-weight: 400;\n  font-size: 15px;\n}\n\n:host table th,\n:host table td {\n  padding: 10px 10px 10px 0;\n  text-align: left;\n}\n\n:host table th.link-records-item-diff-update,\n:host table td.link-records-item-diff-update {\n  word-break: normal;\n  text-align: center;\n  width: 50px;\n}\n\n:host table th.link-records-item-diff-value,\n:host table td.link-records-item-diff-value {\n  word-break: break-all;\n  white-space: pre-line;\n}\n\n:host table th.item-deemphasized,\n:host table td.item-deemphasized {\n  font-family: \"Blackbaud Sans\", \"Helvetica Neue\", Arial, sans-serif;\n  color: #686c73;\n  font-weight: 400;\n  font-size: 15px;\n  font-style: italic;\n}\n\n:host table th.item-highlighted,\n:host table td.item-highlighted {\n  font-weight: 600;\n}\n\n:host table tbody tr {\n  border-bottom: 1px dotted #cdcfd2;\n}\n\n:host table tbody tr:first-child {\n  border-top: 1px dotted #cdcfd2;\n}\n\n:host /deep/ sky-checkbox .sky-checkbox {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin: auto;\n}\n`],\n  changeDetection: ChangeDetectionStrategy.OnPush\n}, ] },\n];\n/** @nocollapse */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n{type: SkyLinkRecordsState, },\n{type: SkyLinkRecordsStateDispatcher, },\n];\nstatic propDecorators: {[key: string]: DecoratorInvocation[]} = {\n'readOnly': [{ type: Input },],\n'key': [{ type: Input },],\n'item': [{ type: Input },],\n'match': [{ type: Input },],\n'fields': [{ type: Input },],\n'selectedByDefault': [{ type: Input },],\n'showNewFieldValues': [{ type: Input },],\n};\n}\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"]}