{"version":3,"sources":["../../../.srctemp/modules/tokens/tokens.component.ts"],"names":[],"mappings":"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","file":"tokens.component.js","sourceRoot":"","sourcesContent":["import {\n  ChangeDetectionStrategy,\n  ChangeDetectorRef,\n  SimpleChanges,\n  Component,\n  EventEmitter,\n  Input,\n  OnChanges,\n  OnDestroy,\n  OnInit,\n  Output,\n  QueryList,\n  ViewChildren\n} from '@angular/core';\n\nimport { Subject } from 'rxjs/Subject';\nimport 'rxjs/add/operator/takeUntil';\n\nimport {\n  SkyToken,\n  SkyTokensMessage,\n  SkyTokensMessageType,\n  SkyTokenSelectedEventArgs\n} from './types';\n\nimport { SkyTokenComponent } from './token.component';\n\n\nexport class SkyTokensComponent implements OnInit, OnChanges, OnDestroy {\n  \n  public set disabled(value: boolean) {\n    this._disabled = value;\n  }\n\n  public get disabled(): boolean {\n    return (this._disabled === true);\n  }\n\n  \n  public set dismissible(value: boolean) {\n    this._dismissible = value;\n  }\n\n  public get dismissible(): boolean {\n    return (this._dismissible !== false);\n  }\n\n  \n  public set displayWith(value: string) {\n    this._displayWith = value;\n  }\n\n  public get displayWith(): string {\n    return this._displayWith || 'name';\n  }\n\n  \n  public set focusable(value: boolean) {\n    this._focusable = value;\n  }\n\n  public get focusable(): boolean {\n    return (this._focusable !== false);\n  }\n\n  \n  public messageStream = new Subject<SkyTokensMessage>();\n\n  \n  public set tokens(value: SkyToken[]) {\n    this._tokens = value;\n    this.tokensChange.emit(this._tokens);\n  }\n\n  public get tokens(): SkyToken[] {\n    return this._tokens || [];\n  }\n\n  \n  public tokensChange = new EventEmitter<SkyToken[]>();\n\n  \n  public focusIndexOverRange = new EventEmitter<void>();\n\n  \n  public focusIndexUnderRange = new EventEmitter<void>();\n\n  \n  public tokenSelected = new EventEmitter<SkyTokenSelectedEventArgs>();\n\n  public get activeIndex(): number {\n    return this._activeIndex || 0;\n  }\n\n  public set activeIndex(value: number) {\n    if (value >= this.tokens.length) {\n      value = this.tokens.length - 1;\n      this.focusIndexOverRange.emit();\n    }\n\n    if (value < 0) {\n      value = 0;\n      this.focusIndexUnderRange.emit();\n    }\n\n    this._activeIndex = value;\n  }\n\n  \n  private tokenComponents: QueryList<SkyTokenComponent>;\n  private ngUnsubscribe = new Subject();\n\n  private _activeIndex: number;\n  private _disabled: boolean;\n  private _dismissible: boolean;\n  private _focusable: boolean;\n  private _tokens: SkyToken[];\n  private _displayWith: string;\n\n  constructor(\n    private changeDetector: ChangeDetectorRef\n  ) { }\n\n  public ngOnInit() {\n    if (this.messageStream) {\n      this.initMessageStream();\n    }\n  }\n\n  public ngOnChanges(changes: SimpleChanges) {\n    if (\n      changes.messageStream &&\n      changes.messageStream.currentValue &&\n      !changes.messageStream.firstChange\n    ) {\n      this.initMessageStream();\n    }\n  }\n\n  public ngOnDestroy() {\n    this.ngUnsubscribe.next();\n    this.ngUnsubscribe.complete();\n\n    if (this.messageStream) {\n      this.messageStream.complete();\n    }\n  }\n\n  public onTokenClick(token: SkyToken) {\n    if (this.disabled) {\n      return;\n    }\n\n    this.notifyTokenSelected(token);\n  }\n\n  public onTokenKeyDown(event: KeyboardEvent) {\n    const key = event.key.toLowerCase();\n\n    if (this.disabled) {\n      return;\n    }\n\n    /* tslint:disable-next-line:switch-default */\n    switch (key) {\n      case 'left':\n      case 'arrowleft':\n      this.messageStream.next({ type: SkyTokensMessageType.FocusPreviousToken });\n      event.preventDefault();\n      break;\n\n      case 'right':\n      case 'arrowright':\n      this.messageStream.next({ type: SkyTokensMessageType.FocusNextToken });\n      event.preventDefault();\n      break;\n    }\n  }\n\n  public selectToken(token: SkyToken) {\n    if (this.disabled) {\n      return;\n    }\n\n    this.notifyTokenSelected(token);\n  }\n\n  public removeToken(token: SkyToken) {\n    this.tokens = this.tokens.filter(t => t !== token);\n    this.changeDetector.detectChanges();\n  }\n\n  private focusPreviousToken() {\n    this.activeIndex--;\n    this.focusActiveToken();\n  }\n\n  private focusNextToken() {\n    this.activeIndex++;\n    this.focusActiveToken();\n  }\n\n  private focusLastToken() {\n    this.activeIndex = this.tokenComponents.length - 1;\n    this.focusActiveToken();\n  }\n\n  private focusActiveToken() {\n    const tokenComponent = this.tokenComponents\n      .find((comp: SkyTokenComponent, i: number) => {\n        return (this.activeIndex === i);\n      });\n\n    if (tokenComponent) {\n      tokenComponent.focusElement();\n    }\n  }\n\n  private removeActiveToken() {\n    const token = this.tokens[this.activeIndex];\n    if (token) {\n      this.removeToken(token);\n    }\n  }\n\n  private initMessageStream() {\n    this.messageStream\n      .takeUntil(this.ngUnsubscribe)\n      .subscribe((message: SkyTokensMessage) => {\n        /* tslint:disable-next-line:switch-default */\n        switch (message.type) {\n          case SkyTokensMessageType.FocusLastToken:\n          this.focusLastToken();\n          break;\n\n          case SkyTokensMessageType.FocusActiveToken:\n          this.focusActiveToken();\n          break;\n\n          case SkyTokensMessageType.FocusPreviousToken:\n          this.focusPreviousToken();\n          break;\n\n          case SkyTokensMessageType.FocusNextToken:\n          this.focusNextToken();\n          break;\n\n          case SkyTokensMessageType.RemoveActiveToken:\n          this.removeActiveToken();\n          break;\n        }\n      });\n  }\n\n  private notifyTokenSelected(token: SkyToken) {\n    this.tokenSelected.emit({\n      token\n    });\n  }\nstatic decorators: DecoratorInvocation[] = [\n{ type: Component, args: [{\n  selector: 'sky-tokens',\n  template: `<div\n  *ngIf=\"tokens\"\n  class=\"sky-tokens\"\n  role=\"list\">\n\n  <sky-token\n    *ngFor=\"let token of tokens; let i = index\"\n    role=\"listitem\"\n    [disabled]=\"disabled\"\n    [dismissible]=\"dismissible\"\n    [focusable]=\"focusable\"\n    (dismiss)=\"removeToken(token)\"\n    (click)=\"onTokenClick(token)\"\n    (keydown)=\"onTokenKeyDown($event)\"\n    (keyup.enter)=\"selectToken(token);$event.preventDefault();\"\n    (tokenFocus)=\"activeIndex = i\">\n    {{ token.value[displayWith] }}\n  </sky-token>\n\n  <div class=\"sky-tokens-content\">\n    <ng-content>\n    </ng-content>\n  </div>\n</div>\n`,\n  styles: [`@charset \"UTF-8\";\n.sky-tokens {\n  display: flex;\n  flex-wrap: wrap;\n  align-items: baseline;\n  margin: -2px;\n}\n\n.sky-tokens .sky-tokens-content,\n.sky-tokens ::ng-deep sky-token {\n  flex: 0 0 auto;\n  display: inline-flex;\n  padding: 2px;\n}\n\n.sky-tokens .sky-tokens-content {\n  flex-grow: 1;\n  flex-basis: 0px;\n}\n\n.sky-tokens .sky-tokens-content:before {\n  content: \"​\";\n}\n`],\n  changeDetection: ChangeDetectionStrategy.OnPush\n}, ] },\n];\n/** @nocollapse */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n{type: ChangeDetectorRef, },\n];\nstatic propDecorators: {[key: string]: DecoratorInvocation[]} = {\n'disabled': [{ type: Input },],\n'dismissible': [{ type: Input },],\n'displayWith': [{ type: Input },],\n'focusable': [{ type: Input },],\n'messageStream': [{ type: Input },],\n'tokens': [{ type: Input },],\n'tokensChange': [{ type: Output },],\n'focusIndexOverRange': [{ type: Output },],\n'focusIndexUnderRange': [{ type: Output },],\n'tokenSelected': [{ type: Output },],\n'tokenComponents': [{ type: ViewChildren, args: [SkyTokenComponent, ] },],\n};\n}\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"]}