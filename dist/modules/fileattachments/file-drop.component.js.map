{"version":3,"sources":["../../../.srctemp/modules/fileattachments/file-drop.component.ts"],"names":[],"mappings":"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","file":"file-drop.component.js","sourceRoot":"","sourcesContent":["import {\n  Component,\n  Input,\n  Output,\n  EventEmitter,\n  ElementRef,\n  ViewChild\n} from '@angular/core';\n\nimport {\n  SkyFileItem\n} from './file-item';\n\nimport {\n  SkyFileLink\n} from './file-link';\n\nimport {\n  SkyFileDropChange\n} from './file-drop-change';\n\n\nexport class SkyFileDropComponent {\n  \n  public filesChanged = new EventEmitter<SkyFileDropChange>();\n\n  \n  public linkChanged = new EventEmitter<SkyFileLink>();\n\n  \n  public minFileSize: number = 0;\n\n  \n  public maxFileSize: number = 500000;\n\n  \n  public multiple: boolean = true;\n\n  \n  public validateFn: Function;\n\n  \n  public acceptedTypes: string;\n\n  \n  public noClick: boolean = false;\n\n  \n  public allowLinks: boolean = false;\n\n  \n  public inputEl: ElementRef;\n\n  public rejectedOver: boolean = false;\n  public acceptedOver: boolean = false;\n  public linkUrl: string;\n\n  private enterEventTarget: any;\n\n  public dropClicked() {\n    if (!this.noClick) {\n      this.inputEl.nativeElement.click();\n    }\n  }\n\n  public fileChangeEvent(fileChangeEvent: any) {\n    this.handleFiles(fileChangeEvent.target.files);\n  }\n\n  public fileDragEnter(dragEnterEvent: any) {\n    // Save this target to know when the drag event leaves\n    this.enterEventTarget = dragEnterEvent.target;\n    dragEnterEvent.stopPropagation();\n    dragEnterEvent.preventDefault();\n  }\n\n  public fileDragOver(dragOverEvent: any) {\n    const transfer = dragOverEvent.dataTransfer;\n\n    dragOverEvent.stopPropagation();\n    dragOverEvent.preventDefault();\n\n    if (transfer) {\n      if (transfer.items) {\n        const files = transfer.items;\n\n        for (let index = 0; index < files.length; index++) {\n          const file: any = files[index];\n\n          if (file.type && this.fileTypeRejected(file.type)) {\n            this.rejectedOver = true;\n            this.acceptedOver = false;\n            return;\n          }\n        }\n\n        if (files.length > 0 && !this.acceptedOver) {\n          this.rejectedOver = false;\n          this.acceptedOver = true;\n        }\n\n      } else if (transfer.files) {\n        // If the browser does not support DataTransfer.items,\n        // defer file-type checking to drop handler.\n        // https://developer.mozilla.org/en-US/docs/Web/API/DataTransfer/items#Browser_compatibility\n        this.rejectedOver = false;\n        this.acceptedOver = true;\n      }\n    }\n  }\n\n  public fileDrop(dropEvent: any) {\n    dropEvent.stopPropagation();\n    dropEvent.preventDefault();\n\n    this.enterEventTarget = undefined;\n    this.rejectedOver = false;\n    this.acceptedOver = false;\n\n    if (dropEvent.dataTransfer && dropEvent.dataTransfer.files) {\n      if (this.verifyDropFiles(dropEvent.dataTransfer.files)) {\n        this.handleFiles(dropEvent.dataTransfer.files);\n      }\n    }\n  }\n\n  public fileDragLeave(dragLeaveEvent: any) {\n    if (this.enterEventTarget === dragLeaveEvent.target) {\n      this.rejectedOver = false;\n      this.acceptedOver = false;\n    }\n  }\n\n  public addLinkEnter(event: KeyboardEvent) {\n    if (event.which === 13) {\n      this.addLink(event);\n    }\n  }\n\n  public addLink(event: Event) {\n    event.preventDefault();\n    this.linkChanged.emit({ url: this.linkUrl } as SkyFileLink);\n    this.linkUrl = undefined;\n  }\n\n  private emitFileChangeEvent(\n    totalFiles: number,\n    rejectedFileArray: Array<SkyFileItem>,\n    validFileArray: Array<SkyFileItem>\n  ) {\n    if (totalFiles === rejectedFileArray.length + validFileArray.length) {\n      this.filesChanged.emit({\n        files: validFileArray,\n        rejectedFiles: rejectedFileArray\n      } as SkyFileDropChange);\n\n      this.inputEl.nativeElement.value = '';\n    }\n  }\n\n  private filesRejected(\n    file: SkyFileItem,\n    validFileArray: Array<SkyFileItem>,\n    rejectedFileArray: Array<SkyFileItem>,\n    totalFiles: number\n  ) {\n    rejectedFileArray.push(file);\n    this.emitFileChangeEvent(totalFiles, rejectedFileArray, validFileArray);\n  }\n\n  private loadFile(\n    fileDrop: SkyFileDropComponent,\n    file: SkyFileItem,\n    validFileArray: Array<SkyFileItem>,\n    rejectedFileArray: Array<SkyFileItem>,\n    totalFiles: number\n  ) {\n    const reader = new FileReader();\n\n    reader.addEventListener('load', (event: any) => {\n      file.url = event.target.result;\n      validFileArray.push(file);\n      fileDrop.emitFileChangeEvent(totalFiles, rejectedFileArray, validFileArray);\n    });\n\n    reader.addEventListener('error', (event: any) => {\n      fileDrop.filesRejected(file, validFileArray, rejectedFileArray, totalFiles);\n    });\n\n    reader.addEventListener('abort', (event: any) => {\n      fileDrop.filesRejected(file, validFileArray, rejectedFileArray, totalFiles);\n    });\n\n    reader.readAsDataURL(file.file);\n  }\n\n  private getMimeSubtype(type: string) {\n    return type.substr(type.indexOf('/') + 1, type.length);\n  }\n\n  private getMimeMainType(type: string) {\n    return type.substr(0, type.indexOf('/'));\n  }\n\n  private fileTypeInArray(typeArray: string[], fileType: string) {\n    if (typeArray.indexOf(fileType) !== -1) {\n      return true;\n    }\n\n    for (let index = 0; index < typeArray.length; index++) {\n      const type = typeArray[index];\n      const validSubtype = this.getMimeSubtype(type);\n\n      if (validSubtype === '*') {\n        if (this.getMimeMainType(type) === this.getMimeMainType(fileType)) {\n          return true;\n        }\n      }\n    }\n\n    return false;\n  }\n\n  private fileTypeRejected(fileType: string) {\n    if (!this.acceptedTypes) {\n      return false;\n    }\n\n    if (!fileType) {\n      return true;\n    }\n\n    let acceptedTypesUpper = this.acceptedTypes.toUpperCase();\n    let typeArray = acceptedTypesUpper.split(',');\n\n    return !this.fileTypeInArray(typeArray, fileType.toUpperCase());\n  }\n\n  private handleFiles(files: FileList) {\n    let validFileArray: Array<SkyFileItem> = [];\n    let rejectedFileArray: Array<SkyFileItem> = [];\n    let totalFiles = files.length;\n    let fileDrop = this;\n\n    for (let index = 0; index < files.length; index++) {\n      let fileItem = {\n        file: files.item(index)\n      } as SkyFileItem;\n\n      if (fileItem.file.size < this.minFileSize) {\n        fileItem.errorType = 'minFileSize';\n        fileItem.errorParam = this.minFileSize.toString();\n        this.filesRejected(fileItem, validFileArray, rejectedFileArray, totalFiles);\n\n      } else if (fileItem.file.size > this.maxFileSize) {\n        fileItem.errorType = 'maxFileSize';\n        fileItem.errorParam = this.maxFileSize.toString();\n        this.filesRejected(fileItem, validFileArray, rejectedFileArray, totalFiles);\n\n      } else if (this.fileTypeRejected(fileItem.file.type)) {\n        fileItem.errorType = 'fileType';\n        fileItem.errorParam = this.acceptedTypes;\n        this.filesRejected(fileItem, validFileArray, rejectedFileArray, totalFiles);\n\n      } else if (this.validateFn) {\n        let errorParam = this.validateFn(fileItem);\n\n        if (!!errorParam) {\n          fileItem.errorType = 'validate';\n          fileItem.errorParam = errorParam;\n          this.filesRejected(fileItem, validFileArray, rejectedFileArray, totalFiles);\n\n        } else {\n          this.loadFile(fileDrop, fileItem, validFileArray, rejectedFileArray, totalFiles);\n        }\n\n      } else {\n        this.loadFile(fileDrop, fileItem, validFileArray, rejectedFileArray, totalFiles);\n      }\n    }\n  }\n\n  private verifyDropFiles(files: any) {\n    if (!this.multiple && files.length > 1) {\n      return false;\n    }\n\n    for (let index = 0; index < files.length; index++) {\n      const file = files.item(index);\n\n      if (file.webkitGetAsEntry && file.webkitGetAsEntry() && file.webkitGetAsEntry().isDirectory) {\n        return false;\n      }\n    }\n\n    return true;\n  }\nstatic decorators: DecoratorInvocation[] = [\n{ type: Component, args: [{\n  selector: 'sky-file-drop',\n  template: `<div\n  class=\"sky-file-drop-row\" [ngClass]=\"{ 'sky-file-drop-allow-links': allowLinks }\">\n  <div\n    class=\"sky-file-drop-col\"\n    [ngClass]=\"{ 'sky-file-drop-accept': acceptedOver, 'sky-file-drop-reject': rejectedOver }\">\n\n    <button\n      class=\"sky-file-drop sky-file-drop-target\"\n      type=\"button\"\n      (click)=\"dropClicked()\"\n      (dragover)=\"fileDragOver($event)\"\n      (dragenter)=\"fileDragEnter($event)\"\n      (dragleave)=\"fileDragLeave($event)\"\n      (drop)=\"fileDrop($event)\"\n      [attr.aria-label]=\"'file_upload_drag_or_click' | skyResources\">\n    </button>\n\n    <input\n      tabindex=\"-1\"\n      aria-hidden=\"true\"\n      type=\"file\"\n      class=\"sky-file-input-hidden\"\n      [attr.multiple]=\"multiple ? multiple: null\"\n      [attr.accept]=\"acceptedTypes ? acceptedTypes: null\"\n      (change)=\"fileChangeEvent($event)\"\n      #fileInput>\n\n    <div class=\"sky-file-drop-contents\" *ngIf=\"customEl.children.length === 0\">\n      <div class=\"sky-file-drop-contents-not-over\">\n        <div class=\"sky-file-drop-text-header\">\n          {{ 'file_upload_drag_file_here' | skyResources }}\n        </div>\n        <div class=\"sky-file-drop-text\">\n          {{ 'file_upload_or_click_to_browse' | skyResources }}\n        </div>\n        <i class=\"fa fa-cloud-upload sky-file-upload-icon\"></i>\n      </div>\n\n      <!-- This will appear when file is dragged over and is valid -->\n      <div class=\"sky-file-drop-contents-accept\" >\n        <div class=\"sky-file-drop-text-header\">\n          {{ 'file_upload_drop_files_here' | skyResources }}\n        </div>\n        <i class=\"fa fa-bullseye sky-file-upload-icon\"></i>\n      </div>\n\n      <!-- This will appear when file is dragged over and is invalid -->\n      <div class=\"sky-file-drop-contents-reject\" >\n        <div class=\"sky-file-drop-text-header\">\n          {{ 'file_upload_invalid_file' | skyResources }}\n        </div>\n        <i class=\"fa fa-times-circle sky-file-upload-icon\"></i>\n      </div>\n    </div>\n\n    <div class=\"sky-file-drop-contents-custom\" #customEl>\n      <ng-content></ng-content>\n    </div>\n  </div>\n  <div class=\"sky-file-drop-col\" *ngIf=\"allowLinks\">\n    <div class=\"sky-file-drop-contents\">\n      <div class=\"sky-file-drop-link\">\n        <div class=\"sky-file-drop-link-header\">\n          <div class=\"sky-file-drop-text-header\">\n            {{ 'file_upload_paste_link' | skyResources }}\n          </div>\n        </div>\n        <div class=\"sky-form-group\">\n          <input\n            type=\"text\"\n            class=\"sky-form-control\"\n            [attr.placeholder]=\"'file_upload_link_placeholder' | skyResources\"\n            [(ngModel)]=\"linkUrl\"\n            (keyup)=\"addLinkEnter($event)\"\n            [attr.aria-label]=\"'file_upload_link_input' | skyResources\">\n        </div>\n        <button\n          type=\"button\"\n          class=\"sky-btn sky-btn-primary\"\n          [disabled]=\"!linkUrl\"\n          (click)=\"addLink($event)\">\n          {{ 'file_upload_paste_link_done' | skyResources }}\n        </button>\n      </div>\n    </div>\n  </div>\n</div>\n`,\n  styles: [`.sky-file-drop-col {\n  margin-bottom: 10px;\n  padding-left: 5px;\n  padding-right: 5px;\n  position: relative;\n}\n\n@media (min-width: 768px) {\n  .sky-file-drop-row {\n    display: flex;\n  }\n  .sky-file-drop-col {\n    flex-basis: 100%;\n  }\n  .sky-file-drop-allow-links.sky-file-drop-col {\n    flex-basis: 50%;\n  }\n}\n\nbutton.sky-file-drop {\n  height: 100%;\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  z-index: 1;\n}\n\nbutton.sky-file-drop:hover {\n  cursor: pointer;\n}\n\n.sky-file-drop-contents {\n  border-top: 1px solid #cdcfd2;\n  border-bottom: 1px solid #cdcfd2;\n  border-left: 1px solid #cdcfd2;\n  border-right: 1px solid #cdcfd2;\n  background-color: #eeeeef;\n  padding: 10px;\n  color: #282b31;\n  cursor: pointer;\n  width: 100%;\n  text-align: center;\n  height: 100%;\n}\n\n.sky-file-drop-contents .sky-file-drop-link-header {\n  margin-bottom: 5px;\n}\n\n.sky-file-drop-noclick .sky-file-drop-contents {\n  cursor: default;\n}\n\n.sky-file-drop-accept .sky-file-drop-contents,\n.sky-file-drop-reject .sky-file-drop-contents {\n  border-style: dashed;\n  border-width: 1px;\n}\n\n.sky-file-drop-accept .sky-file-drop-contents-not-over,\n.sky-file-drop-reject .sky-file-drop-contents-not-over {\n  display: none;\n}\n\n.sky-file-drop-accept .sky-file-drop-contents {\n  border-color: #71bf43;\n  color: #282b31;\n}\n\n.sky-file-drop-accept .sky-file-drop-contents-accept {\n  display: block;\n}\n\n.sky-file-drop-reject .sky-file-drop-contents {\n  border-color: #ef4044;\n  color: #282b31;\n}\n\n.sky-file-drop-reject .sky-file-drop-contents-reject {\n  display: block;\n}\n\n.sky-file-drop-contents-accept,\n.sky-file-drop-contents-reject {\n  display: none;\n}\n\n.sky-file-upload-icon {\n  display: block;\n  font-size: 40px;\n  margin-top: 10px;\n}\n\n.sky-file-drop-link {\n  cursor: default;\n}\n\n.sky-file-drop-text-header {\n  font-family: \"Blackbaud Sans Condensed\", \"Helvetica Neue Condensed\", \"Arial Narrow\";\n  color: #282b31;\n  font-weight: 500;\n  font-size: 22px;\n  margin: 0;\n}\n\n.sky-file-drop-text {\n  font-size: 15px;\n  margin-top: 5px;\n  margin-bottom: 20px;\n}\n\n.sky-file-drop-text,\n.sky-file-drop-text-header {\n  line-height: 1.1;\n  display: block;\n}\n\n.sky-file-upload-icon {\n  color: #686c73;\n}\n\n.sky-file-drop {\n  background-color: transparent;\n  border: none;\n  display: block;\n  -webkit-appearance: none;\n  width: 100%;\n  padding: 0;\n}\n\n.sky-file-input-hidden {\n  display: none;\n}\n`]\n}, ] },\n];\n/** @nocollapse */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n];\nstatic propDecorators: {[key: string]: DecoratorInvocation[]} = {\n'filesChanged': [{ type: Output },],\n'linkChanged': [{ type: Output },],\n'minFileSize': [{ type: Input },],\n'maxFileSize': [{ type: Input },],\n'multiple': [{ type: Input },],\n'validateFn': [{ type: Input },],\n'acceptedTypes': [{ type: Input },],\n'noClick': [{ type: Input },],\n'allowLinks': [{ type: Input },],\n'inputEl': [{ type: ViewChild, args: ['fileInput', ] },],\n};\n}\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"]}