{"version":3,"sources":["../../../.srctemp/modules/modal/modal-host.component.ts"],"names":[],"mappings":"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","file":"modal-host.component.js","sourceRoot":"","sourcesContent":["import {\n  Component,\n  ComponentFactoryResolver,\n  Injector,\n  ReflectiveInjector,\n  ViewChild,\n  ViewContainerRef\n} from '@angular/core';\n\nimport { SkyModalAdapterService } from './modal-adapter.service';\nimport { SkyModalInstance } from './modal-instance';\nimport { SkyModalHostService } from './modal-host.service';\nimport { SkyModalConfigurationInterface as IConfig } from './modal.interface';\nimport { SkyModalConfiguration } from './modal-configuration';\n\n\n\nexport class SkyModalHostComponent {\n  public get modalOpen() {\n    return SkyModalHostService.openModalCount > 0;\n  }\n\n  public get backdropZIndex() {\n    return SkyModalHostService.backdropZIndex;\n  }\n\n  \n  public target: ViewContainerRef;\n\n  constructor(\n    private resolver: ComponentFactoryResolver,\n    private adapter: SkyModalAdapterService,\n    private injector: Injector\n  ) { }\n\n  public open(modalInstance: SkyModalInstance, component: any, config?: IConfig) {\n    let params: IConfig = Object.assign({}, config);\n    let factory = this.resolver.resolveComponentFactory(component);\n    let hostService = new SkyModalHostService(params.fullPage);\n    let adapter = this.adapter;\n    let modalOpener: HTMLElement = adapter.getModalOpener();\n\n    params.providers.push({\n      provide: SkyModalHostService,\n      useValue: hostService\n    });\n    params.providers.push({\n      provide: SkyModalConfiguration,\n      useValue: params\n    });\n\n    adapter.setPageScroll(SkyModalHostService.openModalCount > 0);\n    adapter.toggleFullPageModalClass(SkyModalHostService.fullPageModalCount > 0);\n\n    let providers = params.providers /* istanbul ignore next */ || [];\n    let resolvedProviders = ReflectiveInjector.resolve(providers);\n    let injector = ReflectiveInjector.fromResolvedProviders(resolvedProviders, this.injector);\n    let modalComponentRef = this.target.createComponent(factory, undefined, injector);\n\n    modalInstance.componentInstance = modalComponentRef.instance;\n\n    function closeModal() {\n      hostService.destroy();\n      adapter.setPageScroll(SkyModalHostService.openModalCount > 0);\n      adapter.toggleFullPageModalClass(SkyModalHostService.fullPageModalCount > 0);\n      /* istanbul ignore else */\n      /* sanity check */\n      if (modalOpener && modalOpener.focus) {\n        modalOpener.focus();\n      }\n      modalComponentRef.destroy();\n    }\n\n    hostService.openHelp.subscribe((helpKey?: string) => {\n      modalInstance.openHelp(helpKey);\n    });\n\n    hostService.close.subscribe(() => {\n      modalInstance.close();\n    });\n\n    modalInstance.closed.subscribe(() => {\n      closeModal();\n    });\n  }\nstatic decorators: DecoratorInvocation[] = [\n{ type: Component, args: [{\n  selector: 'sky-modal-host',\n  template: `<div\n    class=\"sky-modal-host-backdrop\"\n    [hidden]=\"!modalOpen\"\n    [ngStyle]=\"{\n      zIndex: backdropZIndex\n    }\"\n>\n</div>\n<div #target></div>\n`,\n  styles: [`.sky-modal-host-backdrop {\n  background-color: rgba(0, 0, 0, 0.2);\n  position: fixed;\n  top: 0;\n  left: 0;\n  bottom: 0;\n  right: 0;\n}\n`],\n  viewProviders: [SkyModalAdapterService]\n}, ] },\n];\n/** @nocollapse */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n{type: ComponentFactoryResolver, },\n{type: SkyModalAdapterService, },\n{type: Injector, },\n];\nstatic propDecorators: {[key: string]: DecoratorInvocation[]} = {\n'target': [{ type: ViewChild, args: ['target', { read: ViewContainerRef }, ] },],\n};\n}\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"]}