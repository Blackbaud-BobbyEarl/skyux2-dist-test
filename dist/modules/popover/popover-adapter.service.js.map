{"version":3,"sources":["../../../.srctemp/modules/popover/popover-adapter.service.ts"],"names":[],"mappings":"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","file":"popover-adapter.service.js","sourceRoot":"","sourcesContent":["import {\n  ElementRef,\n  Injectable,\n  Renderer2\n} from '@angular/core';\n\nimport {\n  SkyWindowRefService\n} from '../window';\n\nimport {\n  SkyPopoverAdapterArrowCoordinates,\n  SkyPopoverAdapterCoordinates,\n  SkyPopoverAdapterElements,\n  SkyPopoverAlignment,\n  SkyPopoverPlacement,\n  SkyPopoverPosition\n} from './types';\n\n\nexport class SkyPopoverAdapterService {\n  constructor(\n    private renderer: Renderer2,\n    private windowRef: SkyWindowRefService\n  ) { }\n\n  public getPopoverPosition(\n    elements: SkyPopoverAdapterElements,\n    placement: SkyPopoverPlacement,\n    alignment: SkyPopoverAlignment\n  ): SkyPopoverPosition {\n    const max = 4;\n\n    let counter = 0;\n    let coords: SkyPopoverAdapterCoordinates;\n\n    do {\n      coords = this.getPopoverCoordinates(elements, placement, alignment);\n\n      if (coords.isOutsideViewport) {\n        placement = (counter % 2 === 0) ?\n          this.getInversePlacement(placement) :\n          this.getNextPlacement(placement);\n      }\n\n      counter++;\n    } while (coords.isOutsideViewport && counter < max);\n\n    if (counter === max && coords.isOutsideViewport) {\n      placement = 'fullscreen';\n    }\n\n    const arrowCoords = this.getArrowCoordinates(elements, coords, placement);\n\n    const position = this.verifyCoordinatesNearCaller(elements, {\n      top: coords.top,\n      left: coords.left,\n      arrowTop: arrowCoords.top,\n      arrowLeft: arrowCoords.left,\n      placement,\n      alignment\n    });\n\n    return position;\n  }\n\n  public hidePopover(elem: ElementRef): void {\n    this.renderer.addClass(elem.nativeElement, 'sky-popover-hidden');\n  }\n\n  public showPopover(elem: ElementRef): void {\n    this.renderer.removeClass(elem.nativeElement, 'sky-popover-hidden');\n  }\n\n  public isPopoverLargerThanParent(popover: ElementRef): boolean {\n    const windowObj = this.windowRef.getWindow();\n    const popoverRect = popover.nativeElement.getBoundingClientRect();\n\n    return (\n      popoverRect.height >= windowObj.innerHeight ||\n      popoverRect.width >= windowObj.innerWidth\n    );\n  }\n\n  public getParentScrollListeners(\n    popover: ElementRef,\n    callback: (isVisibleWithinScrollable: boolean) => void\n  ): Function[] {\n    const bodyElement = this.windowRef.getWindow().document.body;\n    const parentElements = this.getScrollableParentElements(popover);\n\n    const listeners = parentElements.map((parentElement: HTMLElement) => {\n      const target: any = (parentElement === bodyElement) ? 'window' : parentElement;\n\n      return this.renderer.listen(target, 'scroll', () => {\n        const isVisible = (target === 'window')\n          ? true\n          : this.isVisibleWithinScrollable(target, popover.nativeElement);\n\n        callback(isVisible);\n      });\n    });\n\n    return listeners;\n  }\n\n  private getPopoverCoordinates(\n    elements: SkyPopoverAdapterElements,\n    placement: SkyPopoverPlacement,\n    alignment: SkyPopoverAlignment\n  ): SkyPopoverAdapterCoordinates {\n    const windowObj = this.windowRef.getWindow();\n    const popoverRect = elements.popover.nativeElement.getBoundingClientRect();\n    const callerRect = elements.caller.nativeElement.getBoundingClientRect();\n\n    const callerXCenter = callerRect.width / 2;\n    const scrollRight = windowObj.innerWidth;\n    const scrollBottom = windowObj.innerHeight;\n\n    let top: number;\n    let left: number;\n    let bleedLeft = 0;\n    let bleedRight = 0;\n    let bleedTop = 0;\n    let bleedBottom = 0;\n    let isOutsideViewport = false;\n\n    /* tslint:disable-next-line:switch-default */\n    switch (placement) {\n      case 'above':\n      top = callerRect.top - popoverRect.height;\n      bleedTop = top;\n      break;\n\n      case 'below':\n      top = callerRect.bottom;\n      bleedBottom = scrollBottom - (top + popoverRect.height);\n      break;\n\n      case 'right':\n      left = callerRect.right;\n      bleedRight = scrollRight - (left + popoverRect.width);\n      break;\n\n      case 'left':\n      left = callerRect.left - popoverRect.width;\n      bleedLeft = left;\n      break;\n    }\n\n    if (placement === 'right' || placement === 'left') {\n      top = callerRect.top - (popoverRect.height / 2) + (callerRect.height / 2);\n      bleedTop = top;\n      bleedBottom = scrollBottom - (top + popoverRect.height);\n    }\n\n    if (placement === 'above' || placement === 'below') {\n\n      // Make adjustments based on horizontal alignment.\n      switch (alignment) {\n        default:\n        case 'center':\n        left = callerRect.left - (popoverRect.width / 2) + callerXCenter;\n        break;\n\n        case 'left':\n        left = callerRect.left;\n        break;\n\n        case 'right':\n        left = callerRect.left - popoverRect.width + callerRect.width;\n        break;\n      }\n\n      bleedLeft = left;\n      bleedRight = scrollRight - (left + popoverRect.width);\n    }\n\n    // Clipped on left?\n    if (bleedLeft < 0) {\n      if (placement === 'left') {\n        isOutsideViewport = true;\n      }\n\n      left = 0;\n    }\n\n    // Clipped on right?\n    if (bleedRight < 0) {\n      if (placement === 'right') {\n        isOutsideViewport = true;\n      }\n\n      left += bleedRight;\n    }\n\n    // Clipped on top?\n    if (bleedTop < 0) {\n      if (placement === 'above') {\n        isOutsideViewport = true;\n      }\n\n      top -= bleedTop;\n    }\n\n    // Clipped on bottom?\n    if (bleedBottom < 0) {\n      if (placement === 'below') {\n        isOutsideViewport = true;\n      }\n\n      top += bleedBottom;\n    }\n\n    return {\n      top,\n      left,\n      isOutsideViewport\n    };\n  }\n\n  private getArrowCoordinates(\n    elements: SkyPopoverAdapterElements,\n    popoverCoords: SkyPopoverAdapterCoordinates,\n    placement: SkyPopoverPlacement\n  ): SkyPopoverAdapterArrowCoordinates {\n    const callerRect = elements.caller.nativeElement.getBoundingClientRect();\n    const popoverRect = elements.popover.nativeElement.getBoundingClientRect();\n    const arrowRect = elements.popoverArrow.nativeElement.getBoundingClientRect();\n    const callerXCenter = (callerRect.width / 2);\n    const callerYCenter = (callerRect.height / 2);\n\n    let top: number;\n    let left: number;\n\n    if (placement === 'left' || placement === 'right') {\n      top = callerRect.top - popoverCoords.top + callerYCenter;\n\n      if (top < callerYCenter) {\n        top = callerYCenter;\n      }\n\n      if (top > popoverRect.height - callerYCenter) {\n        top = popoverRect.height - callerYCenter;\n      }\n    }\n\n    if (placement === 'above' || placement === 'below') {\n      left = callerRect.left - popoverCoords.left + callerXCenter;\n\n      if (left < arrowRect.width) {\n        left = arrowRect.width;\n      }\n\n      if (left > popoverRect.width - arrowRect.width) {\n        left = popoverRect.width - arrowRect.width;\n      }\n    }\n\n    return { top, left };\n  }\n\n  // This method ensures that the popover remains close to caller element,\n  // when the caller element is no longer visible after scrolling.\n  private verifyCoordinatesNearCaller(\n    elements: SkyPopoverAdapterElements,\n    position: SkyPopoverPosition\n  ): SkyPopoverPosition {\n    const windowObj = this.windowRef.getWindow();\n    const callerRect = elements.caller.nativeElement.getBoundingClientRect();\n    const popoverRect = elements.popover.nativeElement.getBoundingClientRect();\n    const pixelTolerance = 40;\n\n    if (position.placement === 'left' || position.placement === 'right') {\n      if (callerRect.top < 0) {\n        position.top = callerRect.top;\n      }\n\n      if (callerRect.bottom > windowObj.innerHeight) {\n        position.top = callerRect.bottom - popoverRect.height;\n      }\n    }\n\n    if (position.placement === 'above' || position.placement === 'below') {\n      if (position.left + pixelTolerance > callerRect.right) {\n        position.left = callerRect.right - pixelTolerance;\n      }\n\n      if (position.left + popoverRect.width - pixelTolerance < callerRect.left) {\n        position.left = callerRect.left - popoverRect.width + pixelTolerance;\n      }\n    }\n\n    return position;\n  }\n\n  private getNextPlacement(placement: SkyPopoverPlacement): SkyPopoverPlacement {\n    const placements: SkyPopoverPlacement[] = ['above', 'right', 'below', 'left'];\n\n    let index = placements.indexOf(placement) + 1;\n    if (index === placements.length) {\n      index = 0;\n    }\n\n    return placements[index];\n  }\n\n  private getInversePlacement(placement: SkyPopoverPlacement): SkyPopoverPlacement {\n    const pairings: any = {\n      above: 'below',\n      below: 'above',\n      right: 'left',\n      left: 'right'\n    };\n\n    return pairings[placement];\n  }\n\n  private getScrollableParentElements(element: ElementRef): Array<HTMLElement> {\n    const windowObj = this.windowRef.getWindow();\n    const bodyElement = windowObj.document.body;\n    const result = [bodyElement];\n\n    let parentElement = element.nativeElement.parentNode;\n\n    while (\n      parentElement !== undefined &&\n      parentElement !== bodyElement &&\n      parentElement instanceof HTMLElement\n    ) {\n      const overflowY = windowObj.getComputedStyle(parentElement, undefined).overflowY.toLowerCase();\n      if (overflowY === 'auto' || overflowY === 'hidden' || overflowY === 'scroll') {\n        result.push(parentElement);\n      }\n\n      parentElement = parentElement.parentNode;\n    }\n\n    return result;\n  }\n\n  // Returns true if the popover is visible in the scrollable parent.\n  private isVisibleWithinScrollable(container: any, popover: any): boolean {\n    const containerRect = container.getBoundingClientRect();\n    const popoverRect = popover.getBoundingClientRect();\n    const percentageTopVisible = (popoverRect.top === 0) ? 100 : popoverRect.top / containerRect.top * 100;\n    const percentageBottomVisible = (containerRect.bottom === 0) ? 100 : containerRect.bottom / popoverRect.bottom * 100;\n\n    return (percentageTopVisible > 95 && percentageBottomVisible > 95);\n  }\nstatic decorators: DecoratorInvocation[] = [\n{ type: Injectable },\n];\n/** @nocollapse */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n{type: Renderer2, },\n{type: SkyWindowRefService, },\n];\n}\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"]}