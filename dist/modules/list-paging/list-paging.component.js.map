{"version":3,"sources":["../../../.srctemp/modules/list-paging/list-paging.component.ts"],"names":[],"mappings":"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","file":"list-paging.component.js","sourceRoot":"","sourcesContent":["import {\n  Component,\n  Input,\n  ChangeDetectionStrategy,\n  forwardRef,\n  OnInit\n} from '@angular/core';\n\nimport { Observable } from 'rxjs/Observable';\nimport 'rxjs/add/operator/distinctUntilChanged';\n\nimport { getValue } from 'microedge-rxstate/dist/helpers';\nimport { ListPagingComponent } from '../list/list-paging.component';\nimport { ListState, ListStateDispatcher, ListItemModel } from '../list/state';\nimport {\n  ListPagingSetMaxPagesAction,\n  ListPagingSetItemsPerPageAction,\n  ListPagingSetPageNumberAction\n} from '../list/state/paging/actions';\n\nimport {\n  AsyncList\n} from 'microedge-rxstate/dist';\n\n\nexport class SkyListPagingComponent extends ListPagingComponent implements OnInit {\n  \n  public pageSize: Observable<number> | number = 10;\n\n  \n  public maxPages: Observable<number> | number = 5;\n\n  \n  public pageNumber: Observable<number> | number = 1;\n\n  public currentPageNumber: Observable<number>;\n\n  public maxDisplayedPages: Observable<number>;\n\n  public itemsPerPage: Observable<number>;\n\n  public itemCount: Observable<number>;\n\n  constructor(\n    state: ListState,\n    dispatcher: ListStateDispatcher\n  ) {\n    super(state, dispatcher);\n  }\n\n  public ngOnInit() {\n\n    this.currentPageNumber = this.state.map(s => s.paging.pageNumber);\n\n    this.maxDisplayedPages = this.state.map(s => s.paging.maxDisplayedPages);\n\n    this.itemsPerPage = this.state.map(s => s.paging.itemsPerPage);\n\n    this.itemCount = this.state.map((s) => {\n      return s.items;\n    })\n    .scan((previousValue: AsyncList<ListItemModel>, newValue: AsyncList<ListItemModel>) => {\n      if (previousValue.lastUpdate > newValue.lastUpdate) {\n        return previousValue;\n      } else {\n        return newValue;\n      }\n    })\n    .map((result: AsyncList<ListItemModel>) => {\n      return result.count;\n    })\n    .distinctUntilChanged();\n\n    // subscribe to or use inputs\n    getValue(this.pageSize, (pageSize: number) =>\n      this.dispatcher.next(\n        new ListPagingSetItemsPerPageAction(Number(pageSize))\n      )\n    );\n    getValue(this.maxPages, (maxPages: number) =>\n      this.dispatcher.next(\n        new ListPagingSetMaxPagesAction(Number(maxPages))\n      )\n    );\n    getValue(this.pageNumber, (pageNumber: number) =>\n      this.dispatcher.next(\n        new ListPagingSetPageNumberAction(Number(pageNumber))\n      ));\n  }\n\n  public pageChange(currentPage: number) {\n    this.dispatcher.next(\n      new ListPagingSetPageNumberAction(Number(currentPage))\n    );\n  }\n\nstatic decorators: DecoratorInvocation[] = [\n{ type: Component, args: [{\n  selector: 'sky-list-paging',\n  template: `<div>\n  <sky-paging\n    [pageSize]=\"itemsPerPage | async\"\n    [maxPages]=\"maxDisplayedPages | async\"\n    [currentPage]=\"currentPageNumber | async\"\n    [itemCount]=\"itemCount | async\"\n    (currentPageChange)=\"pageChange($event)\"\n    >\n  </sky-paging>\n</div>\n`,\n  providers: [\n    /* tslint:disable */\n    { provide: ListPagingComponent, useExisting: forwardRef(() => SkyListPagingComponent)}\n    /* tslint:enable */\n  ],\n  changeDetection: ChangeDetectionStrategy.OnPush\n}, ] },\n];\n/** @nocollapse */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n{type: ListState, },\n{type: ListStateDispatcher, },\n];\nstatic propDecorators: {[key: string]: DecoratorInvocation[]} = {\n'pageSize': [{ type: Input },],\n'maxPages': [{ type: Input },],\n'pageNumber': [{ type: Input },],\n};\n}\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"]}